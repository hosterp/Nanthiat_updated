<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>

    <record id="form_site_purchase_view" model="ir.ui.view">
      <field name="name">form.site.purchase</field>
      <field name="model">site.purchase</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <button name="confirm_purchase" type="object" class="oe_highlight" string="Request" states="draft" groups="hiworth_hr_attendance.group_supervisor,hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager"/>
            <button name="approve_purchase1" type="object" class="oe_highlight" string="Approve" states="confirm" groups="hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager,hiworth_hr_attendance.group_project_manager"/>
            <button name="approve_purchase2" type="object" class="oe_highlight" string="Approve" states="approved1" groups="hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager,hiworth_construction.group_dgm,hiworth_project_management.group_dgm,hiworth_hr_attendance.group_district_manager"/>
            <button name="approve_purchase3" type="object" class="oe_highlight" string="Approve" states="approved2" groups="hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager"/>

            <button name="generate_po_stock" type="object" class="oe_highlight" string="Process" states="approved3" groups="hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager,purchase.group_purchase_manager,hiworth_hr_attendance.group_purchase"/>

            <button name="cancel_process" type="object" class="oe_highlight" string="Cancel" states="confirm,approved1,approved2,order,stock" />
            <button name="set_draft" type="object" class="oe_highlight" string="Set Draft" states="cancel" />

            <field name="state" widget="statusbar" />
          </header>
          <sheet>
            <div class="oe_title">
              <h1>
                <field name="name" />
              </h1>
            </div>
            <group>
              <group>
                <field name="supervisor_id" attrs="{'readonly':[('state','in',['processing','received', 'cancel'])]}" />
                <field name="responsible" invisible="1"/>
                <field name="project_id" required="1" attrs="{'readonly':[('state','in',['confirm','approved1','approved2','approved3','approved4','processing','received', 'cancel'])]}"/>
                <field name="site" required="1" domain="[('usage','=','internal')]" attrs="{'readonly':[('state','in',['confirm','approved1','approved2','approved4','approved3','processing','received', 'cancel'])]}"/>
                <field name="general_purchase" invisible="1"  />
              </group>
              <group>
                <field name="req_no" attrs="{'readonly':[('state','in',['processing','received','approved2','approved4','approved3'])]}"/>
                <field name="order_date"  />
                <field name="min_expected_date" attrs="{'readonly':[('state','in',['confirm','approved1','approved2','approved4','approved3','processing','received', 'cancel'])]}"/>
                <field name="max_expected_date" attrs="{'readonly':[('state','in',['confirm','approved1','approved2','approved4','approved3','processing','received', 'cancel'])]}"/>
                <field name="remarks" attrs="{'readonly':[('state','in',['processing','received', 'cancel'])]}" />
              </group>
            </group>

            <group>
              <notebook>
                <page string="Request Item List">
                  <field name="req_list" nolabel="1" attrs="{'readonly':[('state','in',['processing','received', 'cancel'])]}">
                    <tree editable="bottom">
                      <field name="item_id" required="1" options="{'no_create':True, 'no_create_edit':True}"/>
                      <field name="stock_type" groups="base.group_erp_manager,project.group_project_manager,hiworth_construction.group_project_management_user,hiworth_hr_attendance.group_purchase"/>
                      <field name="expected_supplier"/>
                      <field name="desc"/>
                      <field name="unit" required="1" options="{ 'no_create_edit':True}"/>
                      <field name="requested_quantity" sum="R-total" required="1" attrs="{'readonly':[('request_not_in_draft', '=', True)]}"/>
                      <field name="quantity" sum="A-Total" required="True"/>
                      <field name="remarks"/>
                      <field name="rate" />
                      <field name="estimated_amt" readonly="1" />
                      <field name="request_not_in_draft" invisible="1"/>
                    </tree>
                  </field>
                </page>
              </notebook>
            </group>

            <group>
              <separator string="Reception" />
              <newline />
              <field name="invoice_no" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="invoice_date" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>

              <field name="received_date"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="received_qty" widget="char"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="received_rate"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="received_total"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="tax_ids" widget="many2many_tags" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="tax_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="sub_total" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
              <field name="total_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])],'readonly':[('state','in',['processing','received', 'cancel'])]}"/>
            </group>

            <group string="Approvals" attrs="{'invisible':[('state','in',('draft','confirm'))]}">
              <group>
                <field name="project_manager" readonly="1"
                     attrs="{'invisible':[('state','in',('draft','confirm'))]}" />
              </group>
              <group>
                <field name="purchase_manager" readonly="1" attrs="{'invisible':[('state','in',('draft','confirm','approved1'))]}" />
              </group>
            </group>
            
          </sheet>
        </form>
      </field>
    </record>

    <record id="form_site_purchase_store_keeper_view" model="ir.ui.view">
      <field name="name">form.site.purchase.store.keeper.view</field>
      <field name="model">site.purchase</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <button name="confirm_purchase" type="object" class="oe_highlight" string="Request" states="draft" groups="hiworth_hr_attendance.group_supervisor,hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager,hiworth_project_management.group_store_manager"/>
            <button name="approve_purchase3" type="object" class="oe_highlight" string="Approve" states="confirm" groups="hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager"/>
            <button name="generate_po_stock" type="object" class="oe_highlight" string="Process" states="approved3" groups="hiworth_construction.group_admin_user,hiworth_hr_attendance.group_admin,base.group_erp_manager,purchase.group_purchase_manager,hiworth_hr_attendance.group_purchase"/>
            <button name="cancel_process" type="object" class="oe_highlight" string="Cancel" states="confirm,approved1,approved2,order,stock" />
            <button name="set_draft" type="object" class="oe_highlight" string="Set Draft" states="cancel" />
            <field name="state" widget="statusbar"  statusbar_visible="draft,confirm,approved3,processing,received,cancel"/>
          </header>
          <sheet>
            <div class="oe_title">
              <h1>
                <field name="name" />
              </h1>
            </div>
            <group>
              <group>
                <field name="supervisor_id"  />
                <field name="site" required="1" domain="[('usage','=','internal')]" attrs="{'readonly':[('state','in',['confirm','approved1','approved2','approved4','approved3','processing','received', 'cancel'])]}"/>
              </group>
              <group>
                <field name="req_no" attrs="{'readonly':[('state','in',['processing','received','approved2','approved4','approved3'])]}"/>
                <field name="order_date"  />
                <field name="min_expected_date" attrs="{'readonly':[('state','in',['confirm','approved1','approved2','approved4','approved3','processing','received', 'cancel'])]}"/>
                <field name="max_expected_date" attrs="{'readonly':[('state','in',['confirm','approved1','approved2','approved4','approved3','processing','received', 'cancel'])]}"/>
                <field name="remarks"/>
              </group>
            </group>
            <group>
              <notebook>
                <page string="Request Item List">
                  <field name="req_list" nolabel="1" attrs="{'readonly':[('state','in',['processing','received', 'cancel'])]}">
                    <tree editable="bottom">
                      <field name="item_id" required="True" options="{'no_create_edit':True}"/>
                      <field name="stock_type" groups="base.group_erp_manager,project.group_project_manager,hiworth_construction.group_project_management_user,hiworth_hr_attendance.group_purchase"/>
                      <field name="expected_supplier"/>
                      <field name="desc"  />
                      <field name="unit" required="True" />
                      <field name="requested_quantity" sum="R-total" required="True" attrs="{'readonly':[('request_not_in_draft', '=', True)]}"/>
                      <field name="quantity" sum="A-Total" required="True"/>
                      <field name="remarks"/>
                      <field name="rate" />
                      <field name="estimated_amt" readonly="True" />
                      <field name="request_not_in_draft" invisible="1"/>
                    </tree>
                  </field>
                </page>
              </notebook>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="tree_site_purchase_statements" model="ir.ui.view">
      <field name="name">tree.site.purchase</field>
      <field name="model">site.purchase</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name" />
          <field name="supervisor_id" />
          <field name="responsible" invisible="1"/>
          <field name="order_date" />
          <field name="min_expected_date" />
          <field name="received_date" />
          <field name="item_id" />
          <field name="unit" />
          <field name="quantity" />
          <field name="state"/>
        </tree>
      </field>
    </record>

    <record id="tree_store_purchase_statements" model="ir.ui.view">
      <field name="name">tree.store.purchase</field>
      <field name="model">site.purchase</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name" />
          <field name="supervisor_id" />
          <field name="order_date" />
          <field name="min_expected_date" />
          <field name="received_date" />
          <field name="item_id" />
          <field name="unit" />
          <field name="quantity" />
          <field name="state"/>
        </tree>
      </field>
    </record>

    <record id="action_site_purchase2" model="ir.actions.act_window">
      <field name="name">General Purchase Department</field>
      <field name="res_model">site.purchase</field>
      <field name="type">ir.actions.act_window</field>
      <field name="view_type">form</field>
      <field name="context">{'default_general_purchase':1}</field>
      <field name="domain">[('general_purchase','=',True), ('storekeeper_purchase', '=', False)]</field>
      <field name="view_mode">tree,form</field>
    </record>

    <record id="action_store_keeper_purchase" model="ir.actions.act_window">
      <field name="name">Store Keeper Purchases</field>
      <field name="res_model">site.purchase</field>
      <field name="type">ir.actions.act_window</field>
      <field name="view_type">form</field>
      <field name="context">{'default_general_purchase':1, 'default_storekeeper_purchase': 1}</field>
      <field name="domain">[('general_purchase','=',True), ('storekeeper_purchase', '=', True)]</field>
      <field name="view_mode">tree,form</field>
      <field name="view_ids"
           eval="[(5, 0, 0),
              (0, 0, {'view_mode': 'tree', 'view_id': ref('tree_store_purchase_statements')}),
              (0, 0, {'view_mode': 'form', 'view_id': ref('form_site_purchase_store_keeper_view')})]"/>
    </record>


    <record id="action_view_general_purchase_tree1" model="ir.actions.act_window.view">
      <field name="view_mode">tree</field>
      <field name="view_id" ref="tree_site_purchase_statements" />
      <field name="act_window_id" ref="action_site_purchase2" />
    </record>

    <record id="action_view_general_purchase_form1" model="ir.actions.act_window.view">
      <field name="view_mode">form</field>
      <field name="view_id" ref="form_site_purchase_view" />
      <field name="act_window_id" ref="action_site_purchase2" />
    </record>


<!--     <menuitem id="menu_site_purchase"
          parent="departmentwise_purchase_requisitions"
          action="action_site_purchase2"
          name="Material Request v"
          sequence="0"
          />

    <menuitem id="menu_store_purchase_purchase"
          parent="departmentwise_purchase_requisitions"
          action="action_store_keeper_purchase"
          name="Store Keeper Purchases"
          sequence="1"
         /> -->

<!-- ************************************** -->
<!--        <menuitem id="menu_material_request_neww" -->
<!--            action="action_site_purchase2"-->
<!--          name="Purchase"-->
<!--          groups ="purchase.group_purchase_manager,purchase.group_purchase_user" -->
<!--          sequence="6" -->
<!--          />-->

<!--        <menuitem id="menu_site_purchase_neww1"-->
<!--          parent="menu_material_request_neww"-->
<!--          action="action_site_purchase2"-->
<!--          name="Material Request" -->
<!--          sequence="1" -->
<!--          />-->

  <!-- ################ Bcpl purchase form view ############### -->
  
      <!--   <record id="bcpl_site_purchase_view" model="ir.ui.view">
            <field name="name">bcpl.account.purchase</field>
            <field name="model">bcpl.account.details</field>
            <field name="arch" type="xml">
                  <form>
                    <sheet>
                      <group>
                        <group>
                          <field name="item"/>
                          <field name="invoice_no"/>
                          <field name="doc"/>
                          <field name="vehicle_no"/>


                        </group>
                        <group>
                          <field name="supplier"/>
                          <field name="order_date"/>
                          <field name="site_name"/>
                          <field name="agent"/>

                        </group>

                      </group>
                      <group>
                        <group>
                        <field name="qty" />
                        <field name="rate"/>
                        <field name="amount" />


                        </group>
                        <group>
                        <field name="date"/>
                        <field name="bank"/>
                        <field name="total_amount" />


                        </group>

                      </group>

                    </sheet>
                  </form>
              </field>
            </record> -->

       <!-- ################ bcpl tree view #################### -->

       <!--  <record id="tree_bcpl_purchase_statements" model="ir.ui.view">
            <field name="name">tree.bcpl.purchase</field>
            <field name="model">bcpl.account.details</field>
            <field name="arch" type="xml">
                  <tree>
                    <field name="item" />
                    <field name="invoice_no" />
                    <field name="doc" />
                    <field name="order_date" />
                    <field name="supplier" />
                    <field name="site_name" />
                    <field name="qty" />
                    <field name="rate" />
                    <field name="amount" />
                    <field name="agent" />
                    <field name="vehicle_no" />
                    <field name="date"/>
                    <field name="bank"/>
                    <field name="total_amount"/>
                  </tree>

            </field>
        </record> -->


       <!--  <record id="action_bcpl_account" model="ir.actions.act_window">
            <field name="name">BCPL acccount Details</field>
            <field name="res_model">bcpl.account.details</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record> -->


      <!--   <record id="form_bitumen_purchase_view" model="ir.ui.view">
            <field name="name">form.bitumen.purchase</field>
            <field name="model">site.purchase</field>
            <field name="arch" type="xml">
                  <form>

                    <header>
                      <button name="confirm_purchase" type="object" class="oe_highlight" string="Request" states="draft"  />
                      <button name="approve_purchase1" type="object" class="oe_highlight" string="Approve" states="confirm"  />
                      <button name="approve_purchase2" type="object" class="oe_highlight" string="Approve" states="approved1"  />
                      <button name="order_generate" type="object" class="oe_highlight" string="Create Order" states="approved2"  />
                      <button name="view_order" type="object" class="oe_highlight" string="View PO" states="order"  />
                      <button name="cancel_purchase" type="object" class="oe_highlight" string="Cancel" states="confirm,approved1,approved1,order,received" />
                      <button name="set_draft" type="object" class="oe_highlight" string="Set Draft" states="cancel" />
                      <field name="state" widget="statusbar" />
                    </header>
                    <sheet>
                    
                    <div class="oe_title">
                      <h1>
                        <field name="name"/>
                      </h1>
                    </div>
                    <group>
                      <group>
                        <field name="supervisor_id"/>
                        <field name="site" required="1" domain="[('usage','=','internal')]" />
                        <field name="expected_supplier" options="{'no_create':1}" attrs="{'required':[('state','=','approved2')]}" />
                        <field name="general_purchase" invisible="1"  />
                        <field name="bitumen_agent" domain="[('supplier','=',True)]" context="{'default_supplier':True, 'default_customer': False}"/>
                        <field name="vehicle_agent" domain="[('supplier','=',True)]" context="{'default_supplier':True, 'default_customer': False}"/>
                        <field name="bank_id" />
                      </group>
                      <group>
                        <field name="order_date" required="1" />
                        <field name="min_expected_date" />
                        <field name="max_expected_date" />
                        <field name="doc_no" />
                        <field name="bitumen_purchase" invisible="1"/>
                      </group>
                    </group>
                    <group >
                      <group string="Item details">
                        <field name="item_id" required="1" />
                        <field name="desc" required="1" />
                        <field name="unit" required="1" />
                        <field name="quantity" widget="char" required="1" />
                        <field name="rate" widget="char" attrs="{'required':[('state','=','approved2')]}" />
                        <field name="estimated_amt"  widget="char"/>
                      </group>
                      <group>
                        <separator string="Reception" />
                        <newline />
                        <field name="invoice_no" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="invoice_date" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>

                        <field name="received_date"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_qty" widget="char"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_rate"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_total"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="tax_ids" widget="many2many_tags" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="tax_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="sub_total" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="total_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                      </group>
                    </group>

                  <group string="Approvals" attrs="{'invisible':[('state','in',('draft','confirm'))]}">
                    <group>
                      <field name="project_manager" readonly="1" 
                        attrs="{'invisible':[('state','in',('draft','confirm'))]}" />
                      
                    </group>
                    <group>
                      <field name="purchase_manager" readonly="1" attrs="{'invisible':[('state','in',('draft','confirm','approved1'))]}" />
                      
                    </group>
                  </group>
                </sheet>
                    
                   
                  </form>

            </field>
        </record>
 -->

       <!--  <record id="action_bitumen_purchase2" model="ir.actions.act_window">
            <field name="name">Bitumen Purchase</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="context">{'default_bitumen_purchase':1}</field>
            <field name="domain">[('bitumen_purchase','=',True)]</field>
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_general_purchase_tree" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_bitumen_purchase2" />
        </record>

        <record id="action_view_general_purchase_form" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_bitumen_purchase_view" />
            <field name="act_window_id" ref="action_bitumen_purchase2" />
        </record>


        <menuitem name="Bitumen Purchase "
            id="BCPL_purchase_requisitions"
            parent="purchase.menu_procurement_management"
            action= "action_bitumen_purchase2"
            sequence="1"/>

        <menuitem name="Purchase Requisitions"
            id="departmentwise_purchase_requisitions"
            parent="base.menu_purchase_root"
            sequence="0"/>
         

 -->

<!-- vehicle department -->



          <!--  <record id="form_vehicle_dept" model="ir.ui.view">
            <field name="name">form.site.purchase</field>
            <field name="model">site.purchase</field>
            <field name="arch" type="xml">
                  <form>

                    <header>
                      <button name="confirm_purchase" type="object" class="oe_highlight" string="Request" states="draft"  />
                      <button name="approve_purchase1" type="object" class="oe_highlight" string="Approve" states="confirm"  />
                      <button name="approve_purchase2" type="object" class="oe_highlight" string="Approve" states="approved1"  />
                      <button name="order_generate" type="object" class="oe_highlight" string="Create Order" states="approved2"  />
                      <button name="view_order" type="object" class="oe_highlight" string="View PO" states="order"  />
                      <button name="cancel_purchase" type="object" class="oe_highlight" string="Cancel" states="confirm,approved1,approved1,order,received" />
                      <button name="set_draft" type="object" class="oe_highlight" string="Set Draft" states="cancel" />
                      <field name="state" widget="statusbar" />
                    </header>
                    <sheet>
                     
                    <div class="oe_title">
                      <h1>
                        <field name="name" />
                      </h1>
                    </div>
                    <group>
                      <group>
                        <field name="supervisor_id" />
                        <field name="responsible" invisible="1"/>
                        <field name="site" required="1" domain="[('usage','=','internal')]" />
                        <field name="expected_supplier" options="{'no_create':1}" attrs="{'required':[('state','=','approved2')]}" />
                        <field name="general_purchase" invisible="1"  />
                      </group>
                      <group>
                        <field name="order_date" required="1" />
                        <field name="min_expected_date" />
                        <field name="max_expected_date" />
                      </group>
                    </group>
                    <group >
                      <group string="Item details">
                        <field name="item_id" required="1" />
                        <field name="desc" required="1" />
                        <field name="unit" required="1" />
                        <field name="quantity" widget="char" required="1" />
                        <field name="rate" widget="char" attrs="{'required':[('state','=','approved2')]}" />
                        <field name="estimated_amt"  widget="char"/>
                      </group>
                      <group>
                        <separator string="Reception" />
                        <newline />
                        <field name="invoice_no" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="invoice_date" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_date"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_qty" widget="char"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_rate"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_total"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="tax_ids" widget="many2many_tags" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="tax_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="sub_total" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="total_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                      </group>
                    </group>

                  <group string="Approvals" attrs="{'invisible':[('state','in',('draft','confirm'))]}">
                    <group>
                      <field name="project_manager" readonly="1"  attrs="{'invisible':[('state','in',('draft','confirm'))]}"/>
                      
                    </group>
                    <group>
                      <field name="purchase_manager" readonly="1" 
                        attrs="{'invisible':[('state','in',('draft','confirm','approved1'))]}"
                         />
                     
                    </group>
                  </group>
                </sheet>
                    
                   
                  </form>

            </field>
        </record> -->

<!-- 

        <record id="action_vehicle_dept" model="ir.actions.act_window">
            <field name="name">Vehicle Department</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="context">{'default_vehicle_purchase':1}</field>
            <field name="domain">[('vehicle_purchase','=',True)]</field>
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_vehicle_dept_tree" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_vehicle_dept" />
        </record>

        <record id="action_view_vehicle_dept_purchase_form" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_vehicle_dept" />
            <field name="act_window_id" ref="action_vehicle_dept" />
        </record>


    <menuitem id="menu_vehicle_dept_purchase" 
          parent="departmentwise_purchase_requisitions"
          action="action_vehicle_dept" 
          name="Vehicle Department" 
          sequence="3" 
          groups="hiworth_tms.make_invisible"/> -->

<!-- Telecom department -->


    <!--  <record id="form_telecom_dept" model="ir.ui.view">
            <field name="name">form.site.purchase</field>
            <field name="model">site.purchase</field>
            <field name="arch" type="xml">
                  <form>

                    <header>
                      <button name="confirm_purchase" type="object" class="oe_highlight" string="Request" states="draft"  />
                      <button name="approve_purchase1" type="object" class="oe_highlight" string="Approve" states="confirm"  />
                      <button name="approve_purchase2" type="object" class="oe_highlight" string="Approve" states="approved1"  />
                      <button name="order_generate" type="object" class="oe_highlight" string="Create Order" states="approved2"  />
                      <button name="view_order" type="object" class="oe_highlight" string="View PO" states="order"  />
                      <button name="cancel_purchase" type="object" class="oe_highlight" string="Cancel" states="confirm,approved1,approved1,order,received" />
                      <button name="set_draft" type="object" class="oe_highlight" string="Set Draft" states="cancel" />
                      <field name="state" widget="statusbar" />
                    </header>
                    <sheet>
                     
                    <div class="oe_title">
                      <h1>
                        <field name="name" />
                      </h1>
                    </div>
                    <group>
                      <group>
                        <field name="supervisor_id" />
                        <field name="responsible" invisible="1"/>
                        <field name="site" required="1" domain="[('usage','=','internal')]" />
                        <field name="expected_supplier" options="{'no_create':1}" attrs="{'required':[('state','=','approved2')]}" />
                        <field name="general_purchase" invisible="1"  />
                      </group>
                      <group>
                        <field name="order_date" required="1" />
                        <field name="min_expected_date" />
                        <field name="max_expected_date" />
                      </group>
                    </group>
                    <group >
                      <group string="Item details">
                        <field name="item_id" required="1" />
                        <field name="desc" required="1" />
                        <field name="unit" required="1" />
                        <field name="quantity" widget="char" required="1" />
                        <field name="rate" widget="char" attrs="{'required':[('state','=','approved2')]}" />
                        <field name="estimated_amt"  widget="char"/>
                      </group>
                      <group>
                        <separator string="Reception" />
                        <newline />
                        <field name="invoice_no" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="invoice_date" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_date"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_qty" widget="char"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_rate"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="received_total"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="tax_ids" widget="many2many_tags" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="tax_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="sub_total" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        <field name="total_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                      </group>
                    </group>

                  <group string="Approvals" attrs="{'invisible':[('state','in',('draft','confirm'))]}">
                    <group>
                      <field name="project_manager" readonly="1" 
                        attrs="{'invisible':[('state','in',('draft','confirm'))]}"/>
                     
                    </group>
                    <group>
                      <field name="purchase_manager" readonly="1" 
                       attrs="{'invisible':[('state','in',('draft','confirm','approved1'))]}"  />
                     
                    </group>
                  </group>
                </sheet>
                    
                   
                  </form>

            </field>
        </record>




        <record id="action_telecom_dept" model="ir.actions.act_window">
            <field name="name">Telecom Department</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="context">{'default_telecom_purchase':1}</field>
            <field name="domain">[('telecom_purchase','=',True)]</field>
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_telecom_dept_tree" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_telecom_dept" />
        </record>

        <record id="action_view_telecom_dept_purchase_form" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_telecom_dept" />
            <field name="act_window_id" ref="action_telecom_dept" />
        </record>


    <menuitem id="menu_telecom_dept_purchase" 
          parent="departmentwise_purchase_requisitions"
          action="action_telecom_dept" 
          name="Telecom Department" 
          sequence="3" 
          groups="hiworth_tms.make_invisible"/>
 -->


    <!-- interlocks department -->
   <!--  <record id="form_interlocks_dept" model="ir.ui.view">
            <field name="name">form.site.purchase</field>
            <field name="model">site.purchase</field>
            <field name="arch" type="xml">
                  <form>

                    <header>
                        <button name="confirm_purchase" type="object" class="oe_highlight" string="Request" states="draft"  />
                        <button name="approve_purchase1" type="object" class="oe_highlight" string="Approve" states="confirm"  />
                        <button name="approve_purchase2" type="object" class="oe_highlight" string="Approve" states="approved1"  />
                        <button name="order_generate" type="object" class="oe_highlight" string="Create Order" states="approved2"  />
                        <button name="view_order" type="object" class="oe_highlight" string="View PO" states="order"  />
                        <button name="receive_products" type="object" class="oe_highlight" string="Receive" states="order"  />
                        <button name="approve_accounts" type="object" class="oe_highlight" string="Approve" states="received"  />
                        <button name="cancel_purchase" type="object" class="oe_highlight" string="Cancel" states="confirm,approved1,approved1,order,received" />
                        <button name="set_draft" type="object" class="oe_highlight" string="Set Draft" states="cancel" />
                        <field name="state" widget="statusbar" />
                      </header>
                      <sheet>
                        
                      <div class="oe_title">
                        <h1>
                          <field name="name" />
                        </h1>
                      </div>
                      <group>
                        <group>
                          <field name="supervisor_id" />
                          <field name="responsible" invisible="1"/>
                          <field name="site" required="1" domain="[('usage','=','internal')]" />
                          <field name="expected_supplier" options="{'no_create':1}" attrs="{'required':[('state','=','approved2')]}" />
                          <field name="general_purchase" invisible="1"  />
                        </group>
                        <group>
                          <field name="order_date" required="1" />
                          <field name="min_expected_date" />
                          <field name="max_expected_date" />
                        </group>
                      </group>
                      <group >
                        <group string="Item details">
                          <field name="item_id" required="1" />
                          <field name="desc" required="1" />
                          <field name="unit" required="1" />
                          <field name="quantity" widget="char" required="1" />
                          <field name="rate" widget="char" attrs="{'required':[('state','=','approved2')]}" />
                          <field name="estimated_amt"  widget="char"/>
                        </group>
                        <group>
                          <separator string="Reception" />
                          <newline />
                          <field name="invoice_no" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="invoice_date" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_date"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_qty" widget="char"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_rate"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_total"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="tax_ids" widget="many2many_tags" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="tax_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="sub_total" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="total_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        </group>
                      </group>

                    <group string="Approvals" attrs="{'invisible':[('state','in',('draft','confirm'))]}">
                      <group>
                        <field name="project_manager" readonly="1" attrs="{'invisible':[('state','in',('draft','confirm'))]}" />
                        
                      </group>
                      <group>

                        <field name="purchase_manager" readonly="1" 
                        attrs="{'invisible':[('state','in',('draft','confirm','approved1'))]}"  />
                       
                      </group>
                    </group>
                  </sheet>
                   
                  </form>

            </field>
        </record>


        <record id="action_interlocks_dept" model="ir.actions.act_window">
            <field name="name">Interlocks Department</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="context">{'default_interlocks_purchase':1}</field>
            <field name="domain">[('interlocks_purchase','=',True)]</field>
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_interlocks_dept_tree" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_interlocks_dept" />
        </record>

        <record id="action_view_interlocks_dept_purchase_form" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_interlocks_dept" />
            <field name="act_window_id" ref="action_interlocks_dept" />
        </record>


    <menuitem id="menu_interlocks_dept_purchase" 
          parent="departmentwise_purchase_requisitions"
          action="action_interlocks_dept" 
          name="Interlocks Department" 
          sequence="3" 
          groups="hiworth_tms.make_invisible"/>
 -->

      <!-- Workshop Department -->
     <!--  <record id="form_workshop_depts" model="ir.ui.view">
            <field name="name">form.site.purchase</field>
            <field name="model">site.purchase</field>
            <field name="arch" type="xml">
                  <form>

                    <header>
                        <button name="confirm_purchase" type="object" class="oe_highlight" string="Request" states="draft"  />
                        <button name="approve_purchase1" type="object" class="oe_highlight" string="Approve" states="confirm"  />
                        <button name="approve_purchase2" type="object" class="oe_highlight" string="Approve" states="approved1"  />
                        <button name="order_generate" type="object" class="oe_highlight" string="Create Order" states="approved2"  />
                        <button name="view_order" type="object" class="oe_highlight" string="View PO" states="order"  />
                        <button name="receive_products" type="object" class="oe_highlight" string="Receive" states="order"  />
                        <button name="approve_accounts" type="object" class="oe_highlight" string="Approve" states="received"  />
                        <button name="cancel_purchase" type="object" class="oe_highlight" string="Cancel" states="confirm,approved1,approved1,order,received" />
                        <button name="set_draft" type="object" class="oe_highlight" string="Set Draft" states="cancel" />
                        <field name="state" widget="statusbar" />
                      </header>
                      <sheet>
                       
                      <div class="oe_title">
                        <h1>
                          <field name="name" />
                        </h1>
                      </div>
                      <group>
                        <group>
                          <field name="supervisor_id" />
                          <field name="responsible" invisible="1"/>
                          <field name="site" required="1" domain="[('usage','=','internal')]" />
                          <field name="expected_supplier" options="{'no_create':1}" attrs="{'required':[('state','=','approved2')]}" />
                          <field name="general_purchase" invisible="1"  />
                        </group>
                        <group>
                          <field name="order_date" required="1" />
                          <field name="min_expected_date" />
                          <field name="max_expected_date" />
                        </group>
                      </group>
                      <group >
                        <group string="Item details">
                          <field name="item_id" required="1" />
                          <field name="desc" required="1" />
                          <field name="unit" required="1" />
                          <field name="quantity" widget="char" required="1" />
                          <field name="rate" widget="char" attrs="{'required':[('state','=','approved2')]}" />
                          <field name="estimated_amt"  widget="char"/>
                        </group>
                        <group>
                          <separator string="Reception" />
                          <newline />
                          <field name="invoice_no" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="invoice_date" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_date"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_qty" widget="char"  attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_rate"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="received_total"  widget="char" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="tax_ids" widget="many2many_tags" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="tax_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="sub_total" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                          <field name="total_amount" attrs="{'invisible':[('state','in',['draft','confirm','approved1','approved2'])]}"/>
                        </group>
                      </group>

                    <group string="Approvals" attrs="{'invisible':[('state','in',('draft','confirm'))]}">
                      <group>
                        <field name="project_manager" readonly="1" attrs="{'invisible':[('state','in',('draft','confirm'))]}" />
                      
                      </group>
                      <group>

                        <field name="purchase_manager" readonly="1" 
                        attrs="{'invisible':[('state','in',('draft','confirm','approved1'))]}"  />
                        
                      </group>
                    </group>
                  </sheet>
                   
                  </form>

            </field>
        </record>


        <record id="search_workshop_depts" model="ir.ui.view">
            <field name="name">search.site.purchase</field>
            <field name="model">site.purchase</field>
            <field name="arch" type="xml">
            <search string="Daily Statement">
              <field name="name" />
              <field name="site" />
              <field name="supervisor_id" />
              <field name="responsible" invisible="1"/>
              <field name="expected_supplier" />
              <field name="order_date" />
              <field name="min_expected_date" />
              <field name="max_expected_date" />
              <field name="item_id" />
    

              <filter icon="terp-check" name="to_receive" string="To Receive" domain="[('state','=','order')]" />
              <filter icon="terp-check" name="to_approve" string="To Approve" domain="[('state','=','received')]" />
              <group expand="0" string="Group By">
                <filter string="Month" icon="terp-go-month" domain="[]"
                  name="group_month" context="{'group_by':'order_date'}" />

                <filter string="Site" icon="terp-go-month" domain="[]"
                  name="group_location" context="{'group_by':'site'}" />
                <filter string="User" icon="terp-go-month" domain="[]"
                  name="group_user" context="{'group_by':'supervisor_id'}" />
                <filter string="Product" icon="terp-go-month" domain="[]"
                name="group_item" context="{'group_by':'item_id'}" />
              </group>
            </search>

          </field>
        </record>


        <record id="action_workshop_dept" model="ir.actions.act_window">
            <field name="name">Workshop Department</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="context">{'default_workshop_purchase':1}</field>
            <field name="domain">[('workshop_purchase','=',True)]</field>
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_workshop_dept_tree" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_workshop_dept" />
        </record>

        <record id="action_view_workshop_dept_purchase_form" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_workshop_depts" />
            <field name="act_window_id" ref="action_workshop_dept" />
        </record>


      <menuitem 
              id="menu_workshop_dept_purchase" 
              name="Workshop Department" 
              parent="departmentwise_purchase_requisitions"
              action="action_workshop_dept" 
              groups="hiworth_tms.make_invisible"
              sequence="3" 
              />



     <record id="action_all_depts" model="ir.actions.act_window">
            <field name="name">All Department</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_all_dept_trees" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_all_depts" />
        </record>

        <record id="action_view_all_dept_purchase_forms" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_workshop_depts" />
            <field name="act_window_id" ref="action_all_depts" />
        </record>


    <menuitem id="menu_workshop_dept_purchase" 
          parent="departmentwise_purchase_requisitions"
          action="action_all_depts" 
          name="All Department" 
          sequence="18" 
          groups="hiworth_tms.make_invisible"/>



        <record id="action_all_depts" model="ir.actions.act_window">
            <field name="name">All Department</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_all_dept_trees" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_all_depts" />
        </record>

        <record id="action_view_all_dept_purchase_forms" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_workshop_depts" />
            <field name="act_window_id" ref="action_all_depts" />
        </record>
 -->



         <record id="action_all_depts_to_receive2" model="ir.actions.act_window">
            <field name="name">Items To Receive</field>
            <field name="res_model">site.purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','in',['order','received','invoice'])]</field>
             <field name="context">{'search_default_to_receive':1}</field>

            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="view_mode">tree,form</field>
        </record>


         <record id="action_view_all_dept_trees_to_receive" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_site_purchase_statements" />
            <field name="act_window_id" ref="action_all_depts_to_receive2" />
        </record>

        <record id="action_view_all_dept_form_to_receive" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_site_purchase_view" />
            <field name="act_window_id" ref="action_all_depts_to_receive2" />
        </record>




        <menuitem id="menu_all_depts_supervisor2" parent="root_activity_reports_menu"
            name="Items Reception" sequence="21"/>

        <menuitem id="menu_all_depts_supervisor2_child" parent="menu_all_depts_supervisor2" action="action_all_depts_to_receive2"
            name="Items Reception" sequence="10" />


         <record id="action_all_depts_to_accounts_approve31" model="ir.actions.act_window">
            <field name="name">Items To Receive</field>
            <field name="res_model">purchase.order</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','in',['approved','done'])]</field>
             <!-- <field name="context">{'search_default_to_receive':1}</field> -->

            <!-- <field name="view_id" ref="tree_site_purchase_statements" /> -->
            <field name="view_mode">tree,form</field>
        </record>


        <menuitem id="menu_all_depts_accounts" parent="account.menu_finance"
            name="Purchase" sequence="1"/>

        <menuitem id="menu_all_depts_accounts_sub1" parent="menu_all_depts_accounts" action="action_all_depts_to_accounts_approve31"
            name="Purchase To Approve" sequence="10" />

        <menuitem name="Purchase Receipts" id="menu_all_depts_accounts_warehouse1"
          action="action_all_depts_to_accounts_approve31" parent="stock.menu_stock_warehouse_mgmt"
          sequence="30" />



    <record id="form_current_inventory_valuation_dept" model="ir.ui.view">
            <field name="name">form.inventory.department</field>
            <field name="model">inventory.department</field>
            <field name="arch" type="xml">
                  <form>

                    
                    <sheet>
                    
                    <group>
                        <field name="department" />
                        <field name="name"  />
                        <field name="date" />
                        <field name="location_id" />
                        <field name="qty" />
                        <field name="rate" />
                        <field name="inventory_value" />
                        <field name="site_purchase_id" invisible="1" />
                  
                  </group>
                </sheet>
                    
                   
                  </form>

            </field>
        </record>


    


        <record id="tree_inventory_dept" model="ir.ui.view">
            <field name="name">tree.inventory.department</field>
            <field name="model">inventory.department</field>
            <field name="arch" type="xml">
                  <tree>
                    <field name="department" />
                    <field name="name" />
                    <field name="date" />
                    <field name="location_id" />
                    <field name="qty" sum="QTY"/>
                    <field name="rate" sum="RATE" />
                    <field name="inventory_value" sum="INVENTORY VALUE" />
                    <field name="site_purchase_id" invisible="1" />
                  </tree>

            </field>
        </record>




      <record id="action_current_inventory_department" model="ir.actions.act_window">
            <field name="name">Current Inventory Valuation</field>
            <field name="res_model">inventory.department</field>
            <field name="type">ir.actions.act_window</field>
            <field name="context">{'group_by':'department'}</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

<!--    <menuitem id="menu_current_inventory_department"        parent="departmentwise_purchase_requisitions" action="action_current_inventory_department" -->
<!--          name="Inventory Valuation" sequence="30" -->
<!--          />-->








    <record id="site_purchase_group" model="ir.ui.view">
            <field name="name">Merge Site Purchases</field>
            <field name="model">site.purchase.group</field>
            <field name="arch" type="xml">
               <form string="Merge orders">
                    <group>
                        <separator string="Are you sure you want to merge these requests?"/>
                        <label string="
Please note that: &#10; &#10;
Orders will only be merged if: &#10;
*Purchase requests are in approved state and the same supplier &#10;" colspan="4"/>
                    </group>
                    
                    <footer>
                        <button name="merge_orders" string="Merge Requests" type="object" class="oe_highlight"/>
                        or
                        <button string="Cancel" class="oe_link" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>

        <act_window name="Create Purchase order"
            context="{'search_default_draft': 1, 'search_default_approved': False}"
            res_model="site.purchase.group"
            src_model="site.purchase"
            view_mode="form"
            target="new"
            multi="True"
            key2="client_action_multi"
            id="action_site_purchase_group"/>



</data>
</openerp>